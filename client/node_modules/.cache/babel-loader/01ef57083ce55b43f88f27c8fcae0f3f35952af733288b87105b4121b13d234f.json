{"ast":null,"code":"var _jsxFileName = \"/Users/duktartamang/disussionforum_proto/client/src/Components/Dashboard/SetProfile.js\";\nimport React, { useState } from \"react\";\nimport { UserProfileImage } from \"./ProfileImageContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SetProfile = () => {\n  const {\n    profileImage,\n    setProfileImage\n  } = UserProfileImage();\n\n  // Function to handle file input change\n  function handleImageChange(e) {\n    const selectedImage = e.target.files[0];\n    setProfileImage(URL.createObjectURL(selectedImage));\n  }\n\n  // Function to handle upload button click\n  async function handleUpload() {\n    if (!profileImage) {\n      alert(\"Please select an image first.\");\n      return;\n    }\n    const formData = new FormData();\n    formData.append(\"image\", profileImage);\n    try {\n      const token = localStorage.getItem(\"token\");\n      if (!token) {\n        alert(\"Token not found\");\n        return;\n      }\n\n      // Post request to upload the image to the server\n      const response = await fetch(\"http://localhost:1337/api/setProfile\", {\n        method: \"POST\",\n        headers: {\n          \"x-access-token\": token\n        },\n        body: formData\n      });\n      const data = await response.json();\n      console.log(\"Server Response:\", data);\n      if (data.status === \"ok\") {\n        console.log(\"Image saved in the database\");\n        // You can update your UI or state to reflect the new profile image.\n      }\n    } catch (error) {\n      console.error(\"Error:\", error);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      src: profileImage || \"default_image_url\" // Provide a default image URL if no image is selected\n      ,\n      alt: \"User Profile\",\n      style: {\n        height: 100,\n        width: 200,\n        cursor: \"pointer\"\n      },\n      onClick: () => document.getElementById(\"fileInput\").click() // Trigger file input click on image click\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      id: \"fileInput\",\n      accept: \"image/*\",\n      style: {\n        display: \"none\"\n      },\n      onChange: handleImageChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleUpload,\n      children: \"Upload\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n};\n_c = SetProfile;\nexport default SetProfile;\nvar _c;\n$RefreshReg$(_c, \"SetProfile\");","map":{"version":3,"names":["React","useState","UserProfileImage","jsxDEV","_jsxDEV","SetProfile","profileImage","setProfileImage","handleImageChange","e","selectedImage","target","files","URL","createObjectURL","handleUpload","alert","formData","FormData","append","token","localStorage","getItem","response","fetch","method","headers","body","data","json","console","log","status","error","children","src","alt","style","height","width","cursor","onClick","document","getElementById","click","fileName","_jsxFileName","lineNumber","columnNumber","type","id","accept","display","onChange","_c","$RefreshReg$"],"sources":["/Users/duktartamang/disussionforum_proto/client/src/Components/Dashboard/SetProfile.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { UserProfileImage } from \"./ProfileImageContext\";\n\nconst SetProfile = () => {\n  const { profileImage, setProfileImage } = UserProfileImage();\n\n  // Function to handle file input change\n  function handleImageChange(e) {\n    const selectedImage = e.target.files[0];\n    setProfileImage(URL.createObjectURL(selectedImage));\n  }\n\n  // Function to handle upload button click\n  async function handleUpload() {\n    if (!profileImage) {\n      alert(\"Please select an image first.\");\n      return;\n    }\n\n    const formData = new FormData();\n    formData.append(\"image\", profileImage);\n\n    try {\n      const token = localStorage.getItem(\"token\");\n      if (!token) {\n        alert(\"Token not found\");\n        return;\n      }\n\n      // Post request to upload the image to the server\n      const response = await fetch(\"http://localhost:1337/api/setProfile\", {\n        method: \"POST\",\n        headers: {\n          \"x-access-token\": token,\n        },\n        body: formData,\n      });\n\n      const data = await response.json();\n      console.log(\"Server Response:\", data);\n      if (data.status === \"ok\") {\n        console.log(\"Image saved in the database\");\n        // You can update your UI or state to reflect the new profile image.\n      }\n    } catch (error) {\n      console.error(\"Error:\", error);\n    }\n  }\n\n  return (\n    <div>\n      <img\n        src={profileImage || \"default_image_url\"} // Provide a default image URL if no image is selected\n        alt=\"User Profile\"\n        style={{ height: 100, width: 200, cursor: \"pointer\" }}\n        onClick={() => document.getElementById(\"fileInput\").click()} // Trigger file input click on image click\n      />\n      <input\n        type=\"file\"\n        id=\"fileInput\"\n        accept=\"image/*\"\n        style={{ display: \"none\" }}\n        onChange={handleImageChange}\n      />\n      <button onClick={handleUpload}>Upload</button>\n    </div>\n  );\n};\n\nexport default SetProfile;\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,SAASC,gBAAgB,QAAQ,uBAAuB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEzD,MAAMC,UAAU,GAAGA,CAAA,KAAM;EACvB,MAAM;IAAEC,YAAY;IAAEC;EAAgB,CAAC,GAAGL,gBAAgB,CAAC,CAAC;;EAE5D;EACA,SAASM,iBAAiBA,CAACC,CAAC,EAAE;IAC5B,MAAMC,aAAa,GAAGD,CAAC,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;IACvCL,eAAe,CAACM,GAAG,CAACC,eAAe,CAACJ,aAAa,CAAC,CAAC;EACrD;;EAEA;EACA,eAAeK,YAAYA,CAAA,EAAG;IAC5B,IAAI,CAACT,YAAY,EAAE;MACjBU,KAAK,CAAC,+BAA+B,CAAC;MACtC;IACF;IAEA,MAAMC,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;IAC/BD,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAEb,YAAY,CAAC;IAEtC,IAAI;MACF,MAAMc,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;MAC3C,IAAI,CAACF,KAAK,EAAE;QACVJ,KAAK,CAAC,iBAAiB,CAAC;QACxB;MACF;;MAEA;MACA,MAAMO,QAAQ,GAAG,MAAMC,KAAK,CAAC,sCAAsC,EAAE;QACnEC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UACP,gBAAgB,EAAEN;QACpB,CAAC;QACDO,IAAI,EAAEV;MACR,CAAC,CAAC;MAEF,MAAMW,IAAI,GAAG,MAAML,QAAQ,CAACM,IAAI,CAAC,CAAC;MAClCC,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAEH,IAAI,CAAC;MACrC,IAAIA,IAAI,CAACI,MAAM,KAAK,IAAI,EAAE;QACxBF,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAC;QAC1C;MACF;IACF,CAAC,CAAC,OAAOE,KAAK,EAAE;MACdH,OAAO,CAACG,KAAK,CAAC,QAAQ,EAAEA,KAAK,CAAC;IAChC;EACF;EAEA,oBACE7B,OAAA;IAAA8B,QAAA,gBACE9B,OAAA;MACE+B,GAAG,EAAE7B,YAAY,IAAI,mBAAoB,CAAC;MAAA;MAC1C8B,GAAG,EAAC,cAAc;MAClBC,KAAK,EAAE;QAAEC,MAAM,EAAE,GAAG;QAAEC,KAAK,EAAE,GAAG;QAAEC,MAAM,EAAE;MAAU,CAAE;MACtDC,OAAO,EAAEA,CAAA,KAAMC,QAAQ,CAACC,cAAc,CAAC,WAAW,CAAC,CAACC,KAAK,CAAC,CAAE,CAAC;IAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC9D,CAAC,eACF5C,OAAA;MACE6C,IAAI,EAAC,MAAM;MACXC,EAAE,EAAC,WAAW;MACdC,MAAM,EAAC,SAAS;MAChBd,KAAK,EAAE;QAAEe,OAAO,EAAE;MAAO,CAAE;MAC3BC,QAAQ,EAAE7C;IAAkB;MAAAqC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC7B,CAAC,eACF5C,OAAA;MAAQqC,OAAO,EAAE1B,YAAa;MAAAmB,QAAA,EAAC;IAAM;MAAAW,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAC3C,CAAC;AAEV,CAAC;AAACM,EAAA,GAhEIjD,UAAU;AAkEhB,eAAeA,UAAU;AAAC,IAAAiD,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}